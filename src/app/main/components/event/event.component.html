<!-- <div class="container">
    <p class="title">Данные о событии</p>
    <div class="box">
        <div class="box__data">
            <div>  
                <div class="flex">
                    <p class="text__title">Статус события: </p>
                    <p class="text__data">{{event?.status}}</p>
                </div>
                <div class="flex">
                    <p class="text__title">Тип события: </p>
                    <p class="text__data">{{event?.type}}</p>
                </div>
                <div class="flex">
                    <p class="text__title">Вид спорта: </p>
                    <p class="text__data">{{event?.sport}}</p>
                </div>
                <div class="flex">
                    <p class="text__title">Место проведения: </p>
                    <p class="text__data">{{event?.location.name}}, {{event?.location.address}}</p>
                </div>
                <div class="flex">
                    <p class="text__title">Время начала: </p>
                    <p class="text__data">{{event?.time_start | date: 'dd.MM.YYYY HH:mm'}}</p>
                </div>
                <div class="flex">
                    <p class="text__title">Время окончания: </p>
                    <p class="text__data">{{event?.time_end | date: 'dd.MM.YYYY HH:mm'}}</p>
                </div>
                <div class="flex">
                    <p class="text__title">Цена: </p>
                    <p class="text__data" style="color: #089F5F;">{{event?.price}}&#8381;</p>
                </div>
            </div>
            <div>
                <p *ngIf="!isAuth" class="dangerous">Чтобы проголосовать, войдите в систему</p>
                <div class="box__btns" *ngIf="isAuth">
                    <button class="btn" *ngIf="!event?.app_status_on_moderation" style="background: #089F5F; margin-right: 10px;" mat-raised-button (click)="sendApplicationTrue()">Приду</button>
                    <button class="btn" *ngIf="!event?.app_status_refused" style="background: #9f0808;" mat-raised-button (click)="sendApplicationFalse()">Не приду</button>
                </div>
                <div class="box__tabs">
                    <p class="tab" [ngClass]="{active: list.participants}" mat-raised-button (click)="viewParticipants()">Участники ({{event?.applications.accepted.length + event?.applications.on_moderation.length}})</p>
                    <p class="tab" [ngClass]="{active: list.surveys}" mat-raised-button (click)="viewSurveys()">Не придут ({{event?.applications.refused.length}})</p>
                    <p class="tab" [ngClass]="{active: list.guests}" mat-raised-button (click)="viewGuests()">Гости ({{event?.guests_count}})</p>
                </div>

                <div *ngIf="list.participants">
                    <div *ngFor="let ev of event?.applications.accepted">
                        <p class="surveys__title">
                            <mat-icon style="color: #089F5F;" aria-hidden="false" aria-label="Example logout icon">done</mat-icon>
                            {{ev.player.user.full_name}}
                        </p>
                    </div>
                    <div *ngFor="let ev of event?.applications.on_moderation">
                        <p class="surveys__title">
                            <mat-icon style="color: #9f9508;" aria-hidden="false" aria-label="Example logout icon">pending</mat-icon>
                            {{ev.user.full_name}}
                        </p>
                    </div>
                    <div *ngFor="let ev of event?.applications.invited">
                        <p class="surveys__title">
                            <mat-icon style="color: #9f9508;" aria-hidden="false" aria-label="Example logout icon">pending</mat-icon>
                            {{ev.user.full_name}}
                        </p>
                    </div>
                </div>
                <div *ngIf="list.surveys">
                    <div *ngFor="let ev of event?.applications.refused">
                        <p class="surveys__title">
                            <mat-icon style="color: #9f0808;" aria-hidden="false" aria-label="Example logout icon">close</mat-icon>
                            {{ev.user.full_name}}
                        </p>
                    </div>
                    <div *ngFor="let ev of event?.applications.rejected">
                        <p class="surveys__title">
                            <mat-icon style="color: #9f0808;" aria-hidden="false" aria-label="Example logout icon">close</mat-icon>
                            {{ev.user.full_name}}
                        </p>
                    </div>
                </div>
                <div *ngIf="list.guests">
                    <div *ngFor="let guest of event?.guests">
                        <p class="surveys__title">
                            <mat-icon style="color: #089F5F;" aria-hidden="false" aria-label="Example logout icon">done</mat-icon>
                            {{guest.name}}
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="box__data">
            <p class="subtitle">Комментарии({{comments?.count}})</p>
            <p *ngIf="!isAuth" class="dangerous">Чтобы написать комментарий, войдите в систему</p>
            <form *ngIf="isAuth" [formGroup]="addCommentForm" (ngSubmit)="sendComment()">
                <mat-form-field appearance="fill" class="textarea">
                    <mat-label>Введите текст</mat-label>
                    <textarea matInput
                                cdkTextareaAutosize
                                #autosize="cdkTextareaAutosize"
                                cdkAutosizeMinRows="1"
                                cdkAutosizeMaxRows="5"
                                formControlName="comment"
                                ></textarea>
                </mat-form-field>
                <button *ngIf="!isSend" class="icon__send" [disabled]="addCommentForm.invalid">
                    <mat-icon style="color: #EEF5F8; margin-left: 20px;" aria-hidden="false" aria-label="Example send icon">send</mat-icon>
                </button>
                <button *ngIf="isSend" class="icon__send" type="button" (click)="sendChangeComment()">
                    <mat-icon style="color: #EEF5F8; margin-left: 20px;" aria-hidden="false" aria-label="Example send icon">done</mat-icon>
                </button>
                <button *ngIf="!isSend" class="btn__send" mat-raised-button>Отправить</button>
                <button *ngIf="isSend" class="btn__send" type="button" (click)="sendChangeComment()" mat-raised-button>Сохранить</button>
            </form>
            <p class="title__comment" (click)="openComment()">
                <span *ngIf="!commentWindow">Открыть комментарии </span>
                <span *ngIf="commentWindow">Закрыть комментарии </span>
                <mat-icon *ngIf="!commentWindow" style="color: #EEF5F8; margin-left: 10px;" aria-hidden="false" aria-label="Example send icon">expand_more</mat-icon>
                <mat-icon *ngIf="commentWindow" style="color: #EEF5F8; margin-left: 10px;" aria-hidden="false" aria-label="Example send icon">expand_less</mat-icon>
            </p>
            <div *ngIf="commentWindow" class="container__comment">
                <div *ngFor="let comment of comments?.results.slice().reverse()">
                    <div class="box__comment" [matMenuTriggerFor]="menu" (click)="openMenu(comment)">
                        <span class="user__comment" style="user-select: none;">{{comment.user.full_name}}</span>
                        <p class="text__comment">{{comment.comment}} <span style="user-select: none;" class="time__comment">{{comment.created_at | date: 'HH:mm'}}</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<mat-menu #menu="matMenu">
    <button mat-raised-button style="width: 100%;" (click)="deleteComment()">Удалить сообщение</button>
    <button mat-raised-button style="width: 100%;" (click)="changeComment()">Редактировать сообщение</button>
</mat-menu> -->



<div class="container">
    <div class="flex">
        <div class="data">
            <div class="data__flex_id">
                <div class="data__box_id">
                    <p class="data__id">№ {{event?.id}}</p>
                </div>
            </div>
            <div class="data__flex">
                <div class="data__box_text">
                    <p class="data__title">{{event?.sport.name}}</p>
                    <p class="data__subtitle">{{event?.location.name_address_short}}</p>
                </div>
                <div class="data__box_text">
                    <p class="data__title_status">{{event?.status.name}}</p>
                    <p class="data__subtitle" style="text-align: end;">до старта {{result | date: 'ddд. HHч. mmм. ssс.'}}</p>
                </div>
            </div>
            <div class="data__flex">
                <div class="data__box_text">
                    <p class="data__title">{{event?.short_time}}</p>
                    <p class="data__subtitle">{{event?.full_date}}</p>
                </div>
                <div class="data__box_text">
                    <p class="data__title">{{event?.type.name}}</p>
                    <p class="data__subtitle" style="text-align: end;">создатель события <span style="color: #00FFFF;">{{event?.created_by.full_name}}</span></p>
                </div>
            </div>
            <div class="data__flex">
                <div class="data__box_text" *ngIf="event?.price != 0 && event?.price != null">
                    <p class="data__title"><span>{{statistics?.event_stats.price_per_player}}</span>/{{event?.price}}&#8381;</p>
                    <p class="data__subtitle">[с человека / общая]</p>
                </div>
                <div class="data__box_text" *ngIf="event?.price == 0 || event?.price == null">
                    <p class="data__title">Бесплатно</p>
                    <p class="data__subtitle">[сборы не взимаются]</p>
                </div>
                <p class="data__description">{{event?.comment}}</p>
            </div>
        </div>
        
        <div class="vote">
            
            <div class="vote__box" style="border: 1px solid #00FFFF;" *ngIf="application?.application != null && application?.application.status.id == '1'">
                <div style="background-color: #00FFFF;">
                    <p class="vote__head_title">ЗАЯВКА ПОДАНА!</p>
                </div>
                <div class="vote__box_text">
                    <p class="vote__title">Вы уже оставили заявку на событие.</p>
                    <span class="vote__subtitle">{{application?.application.status.description}}</span>

                    <p class="vote__title" *ngIf="event?.status.id == 1">Заявка на участие в открытом событии.</p>
                    <p class="vote__title" *ngIf="event?.status.id == 5">Заявка на участие в закрытом событии.</p>
                    <span class="vote__subtitle">{{event?.type.description}}</span>
                </div>
            </div>

            <div class="vote__box" style="border: 1px solid #363636;" *ngIf="application?.application != null && application?.application.status.id == '5'">
                <div style="background-color: #363636;">
                    <p class="vote__head_title" style="color: #FFFFFF;">ОТКАЗ ОТ УЧАСТИЯ!</p>
                </div>
                <div class="vote__box_text">
                    <p class="vote__title">Вы отказались участвовать в событии.</p>
                    <span class="vote__subtitle">{{application?.application.status.description}}</span>

                    <p class="vote__title" *ngIf="event?.status.id == 1">Заявка на участие в открытом событии.</p>
                    <p class="vote__title" *ngIf="event?.status.id == 5">Заявка на участие в закрытом событии.</p>
                    <span class="vote__subtitle">{{event?.type.description}}</span>
                </div>
            </div>

            <div class="vote__box" style="border: 1px solid #400080;" *ngIf="application?.application != null && application?.application.status.id == '2'">
                <div style="background-color: #400080;">
                    <p class="vote__head_title" style="color: #FFFFFF;">ЗАЯВКА ПРИНЯТА!</p>
                </div>
                <div class="vote__box_text">
                    <p class="vote__title">Ваша заявка была подтверждена.</p>
                    <span class="vote__subtitle">{{application?.application.status.description}}</span>

                    <p class="vote__title" *ngIf="event?.status.id == 1">Заявка на участие в открытом событии.</p>
                    <p class="vote__title" *ngIf="event?.status.id == 5">Заявка на участие в закрытом событии.</p>
                    <span class="vote__subtitle">{{event?.type.description}}</span>
                </div>
            </div>

            <div class="vote__box" style="border: 1px solid #FFFF00;" *ngIf="application?.application !=null && application?.application.status.id == '4'">
                <div style="background-color: #FFFF00;">
                    <p class="vote__head_title">ВЫ ПРИГЛАШЕНЫ!</p>
                </div>
                <div class="vote__box_text">
                    <p class="vote__title">Вас пригласил <span style="color: #00FFFF;">{{event?.created_by}}</span>.</p>
                    <span class="vote__subtitle" *ngIf="application?.application.comment_moderator">{{application?.application.comment_moderator}}</span>
                    <span class="vote__subtitle" *ngIf="!application?.application.comment_moderator">{{application?.status.description}}</span>

                    <p class="vote__title" *ngIf="event?.status.id == 1">Заявка на участие в открытом событии.</p>
                    <p class="vote__title" *ngIf="event?.status.id == 5">Заявка на участие в закрытом событии.</p>
                    <span class="vote__subtitle">{{event?.type.description}}</span>
                </div>
            </div>

            <div class="vote__box" style="border: 1px solid #959595;" *ngIf="application?.application == null">
                <div style="background-color: #959595;">
                    <p class="vote__head_title">ОТКРЫТОЕ СОБЫТИЕ!</p>
                </div>
                <div class="vote__box_text">
                    <p class="vote__title">Вы можете принять участие в событии.</p>
                    <span class="vote__subtitle">{{application?.application.status.description}}</span>

                    <p class="vote__title" *ngIf="event?.status.id == 1">Заявка на участие в открытом событии.</p>
                    <p class="vote__title" *ngIf="event?.status.id == 5">Заявка на участие в закрытом событии.</p>
                    <span class="vote__subtitle">{{event?.type.description}}</span>
                </div>
            </div>

            <div class="vote__box" style="border: 1px solid #FF0080;" *ngIf="application?.application != null && application?.application.status.id == '3'">
                <div style="background-color: #FF0080;">
                    <p class="vote__head_title" style="color: #FFFFFF;">ЗАЯВКА ОТКЛОНЕНА!</p>
                </div>
                <div class="vote__box_text">
                    <p class="vote__title">Вам запрещено участвовать в событии.</p>
                    <span class="vote__subtitle" *ngIf="application?.application.comment_moderator">{{application?.application.comment_moderator}}</span>
                    <span class="vote__subtitle" *ngIf="!application?.application.comment_moderator">{{application?.status.description}}</span>

                    <p class="vote__title" *ngIf="event?.status.id == 1">Заявка на участие в открытом событии.</p>
                    <p class="vote__title" *ngIf="event?.status.id == 5">Заявка на участие в закрытом событии.</p>
                    <span class="vote__subtitle">{{event?.type.description}}</span>
                </div>
            </div>

            <div class="vote__box_btns" *ngIf="application?.can_edit">
                <button class="vote__btn_accept" (click)="sendAccept()" [ngClass]="{vote__btn_mute: !application?.accept_button}">Приду</button>
                <button class="vote__btn_refuse" (click)="sendReject()" [ngClass]="{vote__btn_mute: !application?.refuse_button}">Не приду</button>
            </div>
        </div>
    </div>
    <div class="participants__box_btns">
        <button class="participants__btn" style="color: #191919; background-color: #FFFFFF;">игроки</button>
        <button class="participants__btn" style="color: #FFFFFF; background-color: #191919;">чат</button>
        <button class="participants__btn" style="color: #FFFFFF; background-color: #400080;">управление</button>
    </div>
    <div class="flex">
        <div class="participants">
            <div class="participants__data">
                <div class="participants__filters">
                    <button [ngClass]="{active_filter: view.accepted}" class="participants__btn_filter" (click)="viewAccepted()">
                        <mat-icon style="color: #363636; font-size: 36px; margin: 0 20px 15px 0;" aria-hidden="false" aria-label="Example logout icon">done</mat-icon>
                        УЧАСТНИКИ <span>({{statistics?.applications.accepted}})</span>
                    </button>
                    <button [ngClass]="{active_filter: view.guests}" class="participants__btn_filter" (click)="viewGuests()">
                        <mat-icon style="color: #363636; font-size: 36px; margin: 0 20px 15px 0;" aria-hidden="false" aria-label="Example logout icon">groups</mat-icon>
                        ГОСТИ <span>({{statistics?.guests_stats.all}})</span>
                    </button>
                    <button [ngClass]="{active_filter: view.refused}" class="participants__btn_filter" (click)="viewRefused()">
                        <mat-icon style="color: #363636; font-size: 36px; margin: 0 20px 15px 0;" aria-hidden="false" aria-label="Example logout icon">close</mat-icon>
                        НЕ ПРИДУТ <span>({{statistics?.applications.refused}})</span>
                    </button>
                    <button [ngClass]="{active_filter: view.invited}" class="participants__btn_filter" (click)="viewInvited()">
                        <mat-icon style="color: #363636; font-size: 32px; margin: 0 20px 10px 0;" aria-hidden="false" aria-label="Example logout icon">mark_email_unread</mat-icon>
                        ПРИГЛАШЕНЫ <span>({{statistics?.applications.invited}})</span>
                    </button>
                    <button [ngClass]="{active_filter: view.rejected}" class="participants__btn_filter" (click)="viewRejected()">
                        <mat-icon style="color: #363636; font-size: 28px; margin: 0 20px 10px 0;" aria-hidden="false" aria-label="Example logout icon">pan_tool</mat-icon>
                        ОТКЛОНЕНЫ <span>({{statistics?.applications.rejected}})</span>
                    </button>
                </div>

                <div class="participants__list" *ngIf="view.accepted">
                    <div class="participants__cell" *ngFor="let application of applications" (click)="getUser(application.user.id)">
                        <div class="participants__avatar"></div>
                        <div class="participants__cell_text">
                            <p class="participants__status">[игрок]</p>
                            <p class="participants__name">{{application.user.full_name}}</p>
                        </div>
                    </div>
                </div>
                <div class="participants__list" *ngIf="view.guests">
                    <div class="participants__cell" *ngFor="let guest of event.guests">
                        <div class="participants__avatar"></div>
                        <div class="participants__cell_text">
                            <p class="participants__status">[игрок]</p>
                            <p class="participants__name">{{guest.name}}</p>
                        </div>
                    </div>
                </div>
                <div class="participants__list" *ngIf="view.refused">
                    <div class="participants__cell" *ngFor="let application of applications" (click)="getUser(application.user.id)">
                        <div class="participants__avatar"></div>
                        <div class="participants__cell_text">
                            <p class="participants__status">[игрок]</p>
                            <p class="participants__name">{{application.user.full_name}}</p>
                        </div>
                    </div>
                </div>
                <div class="participants__list" *ngIf="view.invited">
                    <div class="participants__cell" *ngFor="let application of applications" (click)="getUser(application.user.id)">
                        <div class="participants__avatar"></div>
                        <div class="participants__cell_text">
                            <p class="participants__status">[игрок]</p>
                            <p class="participants__name">{{application.user.full_name}}</p>
                        </div>
                    </div>
                </div>
                <div class="participants__list" *ngIf="view.rejected">
                    <div class="participants__cell" *ngFor="let application of applications" (click)="getUser(application.user.id)">
                        <div class="participants__avatar"></div>
                        <div class="participants__cell_text">
                            <p class="participants__status">[игрок]</p>
                            <p class="participants__name">{{application.user.full_name}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="user">
            <div class="user__flex">
                <div class="user__avatar"></div>
                <div class="user__text">
                    <p class="user__status">[игрок]</p>
                    <p class="user__number">{{user?.phone_number}}</p>
                    <p class="user__email">{{user?.email}}</p>
                </div>
            </div>
            <p class="user__title">{{user?.first_name}} <br> {{user?.last_name}}</p>
        </div>
    </div>
</div>